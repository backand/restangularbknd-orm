/*
 restangularbknd-orm v0.0.1 
 (coffee) Copyright 2014 Backand All rights reserved. https://backand.com 
 License: MIT
 */
!function(){"use strict";angular.module("restangularbknd-orm",["restangular","ngCookies"]).factory("RestangularBknd",["Restangular","CONSTS",function(a,b){return{config:function(){a.setResponseExtractor(function(a,b){if("getList"===b&&!angular.isArray(a)){var c=a.data;return c}return a}),a.setRestangularFields({id:"__metadata.id",route:"restangularRoute",selfLink:"self.href"}),a.setBaseUrl(b.backandUrl+"/1/table/data")},setCredentials:function(b){a.setDefaultHeaders({Authorization:b})},clearCredentials:function(){a.setDefaultHeaders({Authorization:""})}}}]).constant("CONSTS",{backandUrl:"https://api.backand.com:8080"})}(),function(){"use strict";function a(a,b){var c=this;c.signIn=function(c,d,e){return a({method:"POST",url:b.backandUrl+"/token",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},data:{grant_type:"password",username:c,password:d,appname:e}})},c.signUp=function(c,d,e){return a({method:"POST",url:b.backandUrl+"/api/account/signUp",data:{fullName:c,email:d,password:e,confirmPassword:e}})},c.forgot=function(c){return a({method:"POST",url:b.backandUrl+"/api/account/SendChangePasswordLink",data:{username:c}})},c.resetPassword=function(c,d){return a({method:"POST",url:b.backandUrl+"/api/account/changePassword",data:{confirmPassword:c,password:c,token:d}})}}angular.module("restangularbknd-orm").service("AuthService",["$http","CONSTS",a])}(),function(){"use strict";function a(a,b){var c=this;this.currentUser=b.get("globals")?b.get("globals").currentUser:void 0,this.getAuthHeader=function(){return c.currentUser?"bearer "+c.currentUser.access_token:!1},this.getToken=function(){return c.currentUser?c.currentUser.access_token:!1},this.setCredentials=function(a){var d={currentUser:{access_token:a.access_token}};c.currentUser=d.currentUser,b.put("globals",d)},this.clearCredentials=function(){b.remove("globals"),c.currentUser=void 0}}angular.module("restangularbknd-orm").service("SessionService",["$rootScope","$cookieStore",a])}(),function(){"use strict";function a(a,b,c){this.uploadFile=function(d,e,f,g){var h=a.defer();return b.upload({url:c.backandUrl+"/1/file/upload/"+e+"/"+f,file:d,headers:{Authorization:g}}).success(function(a){var b={message:"",url:"",success:!1};a.files[0].success?(b.url=a.files[0].url,b.success=!0):(b.message=a.files[0].error,b.success=!1),h.resolve(b)}).error(function(a){var b={message:"",url:"",success:!1};b.message=a.Message,b.success=!1,h.resolve(b)}),h.promise}}angular.module("restangularbknd-orm").service("AngularFileUploadBkndService",["$q","$upload","CONSTS",a])}();